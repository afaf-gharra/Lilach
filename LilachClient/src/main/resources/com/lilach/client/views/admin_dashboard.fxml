<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/17" 
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.lilach.client.controllers.AdminDashboardController"
      spacing="20" 
      styleClass="bg-primary"
      prefWidth="1400" 
      prefHeight="900"
      stylesheets="@/com/lilach/client/css/styles.css">
    
    <!-- Header -->
    <HBox alignment="CENTER" spacing="20">
        <Label text="Network Admin Dashboard" styleClass="h1 text-white"/>
        <HBox spacing="10">
            <Button text="Refresh" onAction="#handleRefresh" styleClass="btn btn-info">
                <graphic>
                    <FontIcon iconLiteral="fas-sync-alt"/>
                </graphic>
            </Button>
            <Button text="Export Data" onAction="#handleExportData" styleClass="btn btn-warning">
                <graphic>
                    <FontIcon iconLiteral="fas-download"/>
                </graphic>
            </Button>
            <Button text="Logout" onAction="#handleLogout" styleClass="btn btn-secondary">
                <graphic>
                    <FontIcon iconLiteral="fas-sign-out-alt"/>
                </graphic>
            </Button>
        </HBox>
    </HBox>

    <!-- Statistics Cards -->
    <HBox spacing="20" alignment="CENTER">
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Total Stores" styleClass="h3 text-dark"/>
            <Label fx:id="totalStoresLabel" text="0" styleClass="h1 text-lilac"/>
        </VBox>
        
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Active Stores" styleClass="h3 text-dark"/>
            <Label fx:id="activeStoresLabel" text="0" styleClass="h1 text-success"/>
        </VBox>
        
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Total Users" styleClass="h3 text-dark"/>
            <Label fx:id="totalUsersLabel" text="0" styleClass="h1 text-lilac"/>
        </VBox>
        
        <VBox styleClass="stat-card" spacing="5">
            <Label text="Active Users" styleClass="h3 text-dark"/>
            <Label fx:id="activeUsersLabel" text="0" styleClass="h1 text-success"/>
        </VBox>
    </HBox>

    <!-- Main Content Tabs -->
    <TabPane tabClosingPolicy="UNAVAILABLE" styleClass="admin-tab-pane">
        
        <!-- Store Management Tab -->
        <Tab text="Store Management">
            <VBox spacing="15" >
                <Label text="Store Management" styleClass="h2 text-lilac"/>
                
                <!-- Store List -->
                <TableView fx:id="storesTable" prefHeight="300">
                    <columns>
                        <TableColumn fx:id="storeIdColumn" text="ID" prefWidth="60"/>
                        <TableColumn fx:id="storeNameColumn" text="Name" prefWidth="150"/>
                        <TableColumn fx:id="storeAddressColumn" text="Address" prefWidth="200"/>
                        <TableColumn fx:id="storePhoneColumn" text="Phone" prefWidth="120"/>
                        <TableColumn fx:id="storeEmailColumn" text="Email" prefWidth="150"/>
                        <TableColumn fx:id="storeActiveColumn" text="Status" prefWidth="80"/>
                        <TableColumn fx:id="storeActionsColumn" text="Actions" prefWidth="120"/>
                    </columns>
                </TableView>

                <!-- Store Form -->
                <Label text="Store Details" styleClass="h3"/>
                <GridPane hgap="10" vgap="10" styleClass="form-grid">
                    <columnConstraints>
                        <ColumnConstraints prefWidth="100"/>
                        <ColumnConstraints prefWidth="300"/>
                    </columnConstraints>

                    <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <TextField fx:id="storeNameField" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-control"/>

                    <Label text="Address:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <TextArea fx:id="storeAddressField" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-control" prefRowCount="3"/>

                    <Label text="Phone:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                    <TextField fx:id="storePhoneField" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-control"/>

                    <Label text="Email:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                    <TextField fx:id="storeEmailField" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="form-control"/>

                    <Label text="Active:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                    <CheckBox fx:id="storeActiveCheckbox" GridPane.rowIndex="4" GridPane.columnIndex="1" selected="true"/>
                </GridPane>

                <!-- Store Form Buttons -->
                <HBox spacing="10">
                    <Button fx:id="addStoreButton" text="Add Store" styleClass="btn btn-success"/>
                    <Button fx:id="updateStoreButton" text="Update Store" styleClass="btn btn-primary" disable="true"/>
                    <Button fx:id="clearStoreButton" text="Clear Form" styleClass="btn btn-secondary"/>
                </HBox>
            </VBox>
        </Tab>

        <!-- User Management Tab -->
        <Tab text="User Management">
            <VBox spacing="15" >
                <Label text="User Management" styleClass="h2 text-lilac"/>
                
                <!-- User List -->
                <TableView fx:id="usersTable" prefHeight="300">
                    <columns>
                        <TableColumn fx:id="userIdColumn" text="ID" prefWidth="60"/>
                        <TableColumn fx:id="userUsernameColumn" text="Username" prefWidth="120"/>
                        <TableColumn fx:id="userFullNameColumn" text="Full Name" prefWidth="150"/>
                        <TableColumn fx:id="userEmailColumn" text="Email" prefWidth="150"/>
                        <TableColumn fx:id="userRoleColumn" text="Role" prefWidth="100"/>
                        <TableColumn fx:id="userAccountTypeColumn" text="Account Type" prefWidth="100"/>
                        <TableColumn fx:id="userActiveColumn" text="Status" prefWidth="80"/>
                        <TableColumn fx:id="userActionsColumn" text="Actions" prefWidth="120"/>
                    </columns>
                </TableView>

                <!-- User Form -->
                <Label text="User Details" styleClass="h3"/>
                <GridPane hgap="10" vgap="10" styleClass="form-grid">
                    <columnConstraints>
                        <ColumnConstraints prefWidth="100"/>
                        <ColumnConstraints prefWidth="250"/>
                        <ColumnConstraints prefWidth="100"/>
                        <ColumnConstraints prefWidth="250"/>
                    </columnConstraints>

                    <Label text="Username:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <TextField fx:id="userUsernameField" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="form-control"/>
                    
                    <Label text="Full Name:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                    <TextField fx:id="userFullNameField" GridPane.rowIndex="0" GridPane.columnIndex="3" styleClass="form-control"/>

                    <Label text="Email:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <TextField fx:id="userEmailField" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-control"/>
                    
                    <Label text="Phone:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                    <TextField fx:id="userPhoneField" GridPane.rowIndex="1" GridPane.columnIndex="3" styleClass="form-control"/>

                    <Label text="Role:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="userRoleCombo" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-control"/>
                    
                    <Label text="Account Type:" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                    <ComboBox fx:id="userAccountTypeCombo" GridPane.rowIndex="2" GridPane.columnIndex="3" styleClass="form-control"/>

                    <Label text="Store:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="userStoreCombo" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="form-control"/>
                    
                    <Label text="Active:" GridPane.rowIndex="3" GridPane.columnIndex="2"/>
                    <CheckBox fx:id="userActiveCheckbox" GridPane.rowIndex="3" GridPane.columnIndex="3" selected="true"/>
                </GridPane>

                <!-- User Form Buttons -->
                <HBox spacing="10">
                    <Button fx:id="addUserButton" text="Add User" styleClass="btn btn-success"/>
                    <Button fx:id="updateUserButton" text="Update User" styleClass="btn btn-primary" disable="true"/>
                    <Button fx:id="clearUserButton" text="Clear Form" styleClass="btn btn-secondary"/>
                </HBox>
            </VBox>
        </Tab>

    </TabPane>

    <Label text="Â© 2025 Lilach Flower Shop" styleClass="text-white"/>
</VBox>